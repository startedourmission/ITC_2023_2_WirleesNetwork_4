#include <Servo.h>

String Sampledata = "<pm10Value>23</pm10Value><pm25Value>100</pm25Value>";
 
Servo servomotor;
int a = 0;

void setup() {
  servomotor.attach(9);
  Serial.begin(9600);                              
  // Serial 통신을 설정합니다.
  while(!Serial);                                           
  Serial.println("Servor Mortor");
}

void loop() {
	  	
      	  String payload =  Sampledata;
          ////////////////////////////////////////////////////////////파싱
          int start_point = payload.indexOf("<pm10Value>");
          int end_point = payload.indexOf("</pm10Value>");
          String pm10=payload.substring(start_point+11,end_point); //더하기11은 <pm10Value>글자수
          Serial.println("PM 10 : " + pm10);
          /////////////////////////////////////////////////////////////
		  int start_point2 = payload.indexOf("<pm25Value>");
          int end_point2 = payload.indexOf("</pm25Value>");
          String pm25=payload.substring(start_point2+11,end_point2); //더하기11은 <pm10Value>글자수
          Serial.println("PM 25 : " + pm25);		 
          
          int pm_10 = pm10.toInt(); //문자를 숫자화
		  int pm_25 = pm25.toInt();
          
          if(pm_10 >= 0 && pm_10 <= 180){
            servomotor.write(pm_10);
            delay(10000);
            servomotor.write(pm_25);
             delay(500000);
          }
  
}
